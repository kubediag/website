<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– 参考</title><link>https://kubediag.org/docs/references/</link><description>Recent content in 参考 on</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://kubediag.org/docs/references/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 命令行工具</title><link>https://kubediag.org/docs/references/component-tool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://kubediag.org/docs/references/component-tool/</guid><description>
&lt;p>命令行工具 &lt;code>kubediag&lt;/code> 可以用于启动 Master 和 Agent 组件。Master 在整个框架中负责控制诊断运维流水线的生成以及诊断的触发。Agent 负责诊断的实际执行。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">kubediag &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>flags&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="参数">参数&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>类型&lt;/th>
&lt;th>描述&lt;/th>
&lt;th>默认值&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&amp;ndash;mode&lt;/td>
&lt;td>string&lt;/td>
&lt;td>指定作为 Master 或者 Agent 运行。&lt;/td>
&lt;td>agent&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;bind-address&lt;/td>
&lt;td>string&lt;/td>
&lt;td>监听的地址。&lt;/td>
&lt;td>0.0.0.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;port&lt;/td>
&lt;td>int&lt;/td>
&lt;td>监听的端口。&lt;/td>
&lt;td>8090&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;node-name&lt;/td>
&lt;td>string&lt;/td>
&lt;td>节点名称。&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;metrics-port&lt;/td>
&lt;td>int&lt;/td>
&lt;td>监控指标的暴露端口。&lt;/td>
&lt;td>10357&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;enable-leader-election&lt;/td>
&lt;td>bool&lt;/td>
&lt;td>为 Master 开启选主。&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;docker-endpoint&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Docker 的监听地址。&lt;/td>
&lt;td>unix:///var/run/docker.sock&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;webhook-port&lt;/td>
&lt;td>int&lt;/td>
&lt;td>Webhook 服务器的监听地址。&lt;/td>
&lt;td>9443&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;host&lt;/td>
&lt;td>string&lt;/td>
&lt;td>Webhook 服务器的 Host。&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;cert-dir&lt;/td>
&lt;td>string&lt;/td>
&lt;td>包含服务端密钥和证书的文件地址。&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;repeat-interval&lt;/td>
&lt;td>duration&lt;/td>
&lt;td>Alertmanager 发送通知成功后第二次发送相同通知的间隔时间。&lt;/td>
&lt;td>6h&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;kafka-brokers&lt;/td>
&lt;td>strings&lt;/td>
&lt;td>需要连接 Kafka 集群的 Broker 地址列表。&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;kafka-topic&lt;/td>
&lt;td>string&lt;/td>
&lt;td>获取消息的 Topic。&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;diagnosis-ttl&lt;/td>
&lt;td>duration&lt;/td>
&lt;td>已完成 Diagnosis 的最大保留时间。&lt;/td>
&lt;td>240h&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;minimum-diagnosis-ttl-duration&lt;/td>
&lt;td>duration&lt;/td>
&lt;td>已完成 Diagnosis 的最小保留时间。&lt;/td>
&lt;td>30m&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;maximum-diagnoses-per-node&lt;/td>
&lt;td>int32&lt;/td>
&lt;td>每台节点上已完成 Diagnosis 的最大保留个数。&lt;/td>
&lt;td>20&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;feature-gates&lt;/td>
&lt;td>mapStringBool&lt;/td>
&lt;td>表示特性关闭或打开的键值对列表。&lt;/td>
&lt;td>Alertmanager=true,ContainerCollector=true,ContainerdGoroutineCollector=true,CorefileProfiler=false,DockerInfoCollector=true,DockerdGoroutineCollector=true,Eventer=false,GoProfiler=true,KafkaConsumer=true,MountInfoCollector=true,NodeCordon=true,PodCollector=true,ProcessCollector=true,SubpathRemountDiagnoser=true,SystemdCollector=true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;data-root&lt;/td>
&lt;td>string&lt;/td>
&lt;td>存储 KubeDiag 数据的根目录。&lt;/td>
&lt;td>/var/lib/kubediag&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item></channel></rss>